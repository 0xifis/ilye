---
import Grid from '~/components/blog/Grid.astro';

import { getBlogPermalink } from '~/utils/permalinks';
import { findPostsByIds } from '~/utils/blog';

export interface Props {
	title?: string;
	allPostsText?: string;
	allPostsLink?: string | URL;
	information?: string;
	postsIds: string[];
}

const {
	title = await Astro.slots.render('title'),
	allPostsText = 'View all posts',
	allPostsLink = getBlogPermalink(),
	information = await Astro.slots.render('information'),
	postsIds = [],
} = Astro.props;

const posts = await findPostsByIds(postsIds);
---

<section class="px-4 py-16 mx-auto max-w-6xl lg:py-20">
	<div class="flex flex-col mb-6 lg:justify-between lg:flex-row md:mb-8">
		<div class="md:max-w-sm mb-2 lg:mb-5">
			{
				title && (
					<h2
						class="text-3xl font-bold tracking-tight sm:text-4xl sm:leading-none group font-heading mb-1 sm:mb-2"
						set:html={title}
					/>
				)
			}
			{
				allPostsText && allPostsLink && (
					<a
						class="hover:text-primary-600 underline underline-offset-4 decoration-1 decoration-dotted transition ease-in duration-200"
						href={allPostsLink}
					>
						{allPostsText} Â»
					</a>
				)
			}
		</div>

		{information && <p class="text-gray-700 dark:text-slate-400 lg:text-sm lg:max-w-md" set:html={information} />}
	</div>

	<Grid posts={posts} />
</section>
